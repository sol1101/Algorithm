# ✔ Session & Cookie
클라이언트가 요청을 한 후 응답을 받으면 그 연결을 끊어버리는 특징 - connectionless<br>
통신이 끝나면 상태를 유지하지 않는 특징 - stateless<br>
위 특징을 해결하기 위해 쿠키와 세션이 사용된다.

📌쿠키(Cookie)
---
- 쿠키란 클라이언트 로컬에 저장되는 키와 값이 들어있는 작은 데이터 파일이다.
- 사용자 인증이 유효한 시간을 명시할 수 있으며, 유효시간이 정해지면 브라우저가 종료되어도 인증이 유지된다.
- 쿠키는 클라이언트의 상태정보를 로컬에 저장했다가 참조한다.
- Response Header에 Set-Cookie 속성을 사용하면 클라이언트에 쿠키를 만들 수 있다.
- 쿠키는 사용자가 따로 요청하지 않아도 브라우저가 Request시에 Request Header를 넣어서 자동으로 서버에 전송한다.

#### 쿠키의 동작 방식
1. 클라이언트가 페이지를 요청
2. 서버에서 쿠키를 생성
3. HTTP헤더에 쿠키를 포함시켜 응답
4. 브라우저가 종료되어도 쿠키 만료기간이 있다면 클라이언트에서 보관함
5. 같은 요청을 할 경우 HTTP헤더에 쿠키를 함께 보냄
6. 이전 상태 정보를 변경 할 필요가 있을 때 쿠키를 업데이트하여 변경된 쿠키를 HTTP헤더에 포함시켜 응답

---

📌세션(Session)
---
- 쿠키를 기반으로 하지만 사용자 정보 데이터를 브라우저에 저장하는 쿠키와는 다르게 세션은 서버에서 관리한다.
- 브라우저를 종료할때까지 인증상태를 유지한다.
- 접속시간에 제한을 두어 일정시간 응답이 없다면 정보가 유지되지 않게 설정이 가능하다.
- 사용자가 많아질수록 서버 메모리를 많이 차치한다.
- 클라이언트가 Request를 보내면 해당 서버의 엔진이 클라이언트에게 유일한 ID를 부여하는데 이것이 세션ID이다.

#### 세션의 동작방식
1. 클라이언트가 서버에 접속시 세션ID를 받음
2. 클라이언트는 세션ID에대해 쿠키를 사용해서 저장하고 가지고 있음
3. 클라이언트는 서버에 요청할때 이 쿠키의 세션ID를 같이 서버에 전달해서 요청
4. 서버는 세션ID를 전달받아서 별다른 작업없이 세션ID로 세션에 있는 클라이언트 정보를 가져와서 사용
5. 클라이언트 정보를 가지고 서버 요청을 처리하여 클라이언트에게 응답

---

📌쿠키와 세션의 차이
--- 
- 세션의 서버에 저장되므로 서버의 자원을 사용하는 반면, 쿠키는 서버의 자원을 사용하지 않는다.
- 쿠키는 서버의 처리가 필요하지 않기때문에 세션보다 속도가 빠르다.
- 쿠키는 로컬에 저장되기 때문에 보안에 취약하지만, 세션은 서버에서 처리하기 때문에 비교적 보안성이 좋다.
- 쿠키는 브라우저가 종료되어도 만료기간이 있어서 유지될 수 있다.
- 세션은 브라우저가 종료되면 만료기간에 상관없이 삭제된다.

***

참고 : [https://interconnection.tistory.com/74](https://interconnection.tistory.com/74)
